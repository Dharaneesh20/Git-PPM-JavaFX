<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.ppm.gitppm.controller.MainController"
            styleClass="main-container">

    <!-- Top Toolbar -->
    <top>
        <VBox styleClass="toolbar-container">
            <!-- Main Toolbar -->
            <ToolBar styleClass="main-toolbar">
                <HBox spacing="10" alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                    <FontIcon iconLiteral="fa-git-square" iconSize="30" styleClass="toolbar-icon"/>
                    <Label fx:id="repoNameLabel" text="Repository Name" styleClass="repo-name"/>
                    <Separator orientation="VERTICAL"/>
                    <Label text="Branch:" styleClass="toolbar-label"/>
                    <ComboBox fx:id="branchComboBox" prefWidth="150" onAction="#onBranchChanged"/>
                    <Button text="New Branch" onAction="#onNewBranch" styleClass="toolbar-button">
                        <graphic><FontIcon iconLiteral="fa-code-branch" iconSize="14"/></graphic>
                    </Button>
                    
                    <Region HBox.hgrow="ALWAYS"/>
                    
                    <Button text="Refresh" onAction="#onRefresh" styleClass="toolbar-button">
                        <graphic><FontIcon iconLiteral="fa-sync" iconSize="14"/></graphic>
                    </Button>
                    <Button text="Fetch" onAction="#onFetch" styleClass="toolbar-button">
                        <graphic><FontIcon iconLiteral="fa-download" iconSize="14"/></graphic>
                    </Button>
                    <Button text="Pull" onAction="#onPull" styleClass="toolbar-button-primary">
                        <graphic><FontIcon iconLiteral="fa-arrow-down" iconSize="14"/></graphic>
                    </Button>
                    <Button text="Push" onAction="#onPush" styleClass="toolbar-button-primary">
                        <graphic><FontIcon iconLiteral="fa-arrow-up" iconSize="14"/></graphic>
                    </Button>
                </HBox>
            </ToolBar>
            
            <!-- Status Bar -->
            <HBox styleClass="status-bar" spacing="15" alignment="CENTER_LEFT">
                <padding><Insets top="5" right="15" bottom="5" left="15"/></padding>
                <Label fx:id="statusMessageLabel" text="Ready" styleClass="status-message"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="fileWatcherStatusLabel" text="â— File Watcher: Active" styleClass="watcher-status"/>
                <Label text="Made by Dharaneesh R S" styleClass="author-label"/>
            </HBox>
        </VBox>
    </top>

    <!-- Main Content -->
    <center>
        <SplitPane dividerPositions="0.35" styleClass="main-split">
            
            <!-- Left Panel - File Changes -->
            <VBox styleClass="left-panel">
                <VBox styleClass="panel-header">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label text="Changes" styleClass="panel-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="changesCountLabel" text="0 files" styleClass="count-label"/>
                    </HBox>
                </VBox>
                
                <!-- Changes Actions -->
                <HBox spacing="10" styleClass="changes-actions">
                    <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                    <Button text="Stage All" onAction="#onStageAll" prefWidth="100" styleClass="action-button">
                        <graphic><FontIcon iconLiteral="fa-plus-circle" iconSize="14"/></graphic>
                    </Button>
                    <Button text="Unstage All" onAction="#onUnstageAll" prefWidth="100" styleClass="action-button">
                        <graphic><FontIcon iconLiteral="fa-minus-circle" iconSize="14"/></graphic>
                    </Button>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Discard" onAction="#onDiscardChanges" styleClass="danger-button">
                        <graphic><FontIcon iconLiteral="fa-times-circle" iconSize="14"/></graphic>
                    </Button>
                </HBox>
                
                <!-- Changes List -->
                <ListView fx:id="changesListView" VBox.vgrow="ALWAYS" styleClass="changes-list"/>
                
                <!-- Commit Section -->
                <VBox styleClass="commit-section">
                    <padding><Insets top="15" right="10" bottom="15" left="10"/></padding>
                    <Label text="Commit Message:" styleClass="commit-label"/>
                    <TextArea fx:id="commitMessageArea" promptText="Enter commit message..." 
                              prefHeight="80" wrapText="true" styleClass="commit-textarea"/>
                    <HBox spacing="10" alignment="CENTER" styleClass="commit-actions">
                        <padding><Insets top="10"/></padding>
                        <Button text="Commit" onAction="#onCommit" prefWidth="150" styleClass="commit-button">
                            <graphic><FontIcon iconLiteral="fa-check-circle" iconSize="16"/></graphic>
                        </Button>
                        <Button text="Commit & Push" onAction="#onCommitAndPush" prefWidth="150" styleClass="commit-push-button">
                            <graphic><FontIcon iconLiteral="fa-arrow-circle-up" iconSize="16"/></graphic>
                        </Button>
                    </HBox>
                </VBox>
            </VBox>
            
            <!-- Right Panel - Commit History & Details -->
            <VBox styleClass="right-panel">
                <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS" styleClass="info-tabs">
                    
                    <!-- Commit History Tab -->
                    <Tab text="Commit History">
                        <graphic><FontIcon iconLiteral="fa-history" iconSize="14"/></graphic>
                        <VBox>
                            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="tab-header">
                                <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                                <Label text="Recent Commits" styleClass="tab-title"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Label fx:id="commitsCountLabel" text="0 commits" styleClass="count-label"/>
                            </HBox>
                            <ListView fx:id="commitsListView" VBox.vgrow="ALWAYS" styleClass="commits-list"/>
                        </VBox>
                    </Tab>
                    
                    <!-- Repository Info Tab -->
                    <Tab text="Repository Info">
                        <graphic><FontIcon iconLiteral="fa-info-circle" iconSize="14"/></graphic>
                        <ScrollPane fitToWidth="true" styleClass="info-scroll">
                            <VBox spacing="15" styleClass="info-content">
                                <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                                
                                <VBox spacing="8">
                                    <Label text="Repository Path:" styleClass="info-label"/>
                                    <Label fx:id="repoPathInfoLabel" text="" wrapText="true" styleClass="info-value"/>
                                </VBox>
                                
                                <VBox spacing="8">
                                    <Label text="Current Branch:" styleClass="info-label"/>
                                    <Label fx:id="currentBranchInfoLabel" text="" styleClass="info-value"/>
                                </VBox>
                                
                                <VBox spacing="8">
                                    <Label text="Remote URL:" styleClass="info-label"/>
                                    <Label fx:id="remoteUrlInfoLabel" text="" wrapText="true" styleClass="info-value"/>
                                </VBox>
                                
                                <VBox spacing="8">
                                    <Label text="All Branches:" styleClass="info-label"/>
                                    <ListView fx:id="branchesListView" prefHeight="150" styleClass="branches-list"/>
                                </VBox>
                                
                                <Separator/>
                                
                                <VBox spacing="10">
                                    <Label text="Quick Actions:" styleClass="info-label"/>
                                    <Button text="Open in File Explorer" onAction="#onOpenInExplorer" 
                                            styleClass="info-action-button" prefWidth="200">
                                        <graphic><FontIcon iconLiteral="fa-folder-open" iconSize="14"/></graphic>
                                    </Button>
                                    <Button text="Open in Terminal" onAction="#onOpenInTerminal" 
                                            styleClass="info-action-button" prefWidth="200">
                                        <graphic><FontIcon iconLiteral="fa-terminal" iconSize="14"/></graphic>
                                    </Button>
                                </VBox>
                            </VBox>
                        </ScrollPane>
                    </Tab>
                    
                    <!-- Console Output Tab -->
                    <Tab text="Console">
                        <graphic><FontIcon iconLiteral="fa-terminal" iconSize="14"/></graphic>
                        <VBox>
                            <ToolBar styleClass="console-toolbar">
                                <Button text="Clear" onAction="#onClearConsole" styleClass="toolbar-button-small">
                                    <graphic><FontIcon iconLiteral="fa-trash" iconSize="12"/></graphic>
                                </Button>
                            </ToolBar>
                            <TextArea fx:id="consoleArea" editable="false" wrapText="true" 
                                      VBox.vgrow="ALWAYS" styleClass="console-area"/>
                        </VBox>
                    </Tab>
                </TabPane>
            </VBox>
        </SplitPane>
    </center>

</BorderPane>
